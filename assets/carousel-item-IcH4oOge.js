import{A as Me,k as I,y as O,b as e,B as j,C as Le,D as ce,E as $e,G as Ae,H as He,I as Be,J as fe,K as x,o as A,c as R,a as q,l as ne,w as Z,n as H,L as G,e as J,M as X,s as Y,T as le,N as Q,m as ve,O as me,F as Pe,g as Oe,t as Ve,P as ze,Q as Re,S as De}from"./index-A1qbNCIE.js";import{b as de,i as Fe,u as he,E as re,a as Ke,c as Ue,_ as pe,d as We,w as je,e as Ge}from"./index--RoxsW5K.js";import{a as Je}from"./user-GNF1uiWY.js";import{u as Qe}from"./index-dgTY9EEW.js";import{f as Xe}from"./vnode-3H_S3K6e.js";import{t as ie}from"./throttle-4f-LfsRt.js";const Ye=de({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),qe={change:(a,B)=>[a,B].every(Fe)},ge=Symbol("carouselContextKey"),ue=300,Ze=(a,B,i)=>{const{children:o,addChild:k,removeChild:C}=Qe(fe(),"ElCarouselItem"),M=Me(),s=I(-1),d=I(null),S=I(!1),h=I(),_=I(0),w=I(!0),E=O(()=>a.arrow!=="never"&&!e(p)),b=O(()=>o.value.some(t=>t.props.label.toString().length>0)),L=O(()=>a.type==="card"),p=O(()=>a.direction==="vertical"),$=O(()=>a.height!=="auto"?{height:a.height}:{height:`${_.value}px`,overflow:"hidden"}),D=ie(t=>{f(t)},ue,{trailing:!0}),F=ie(t=>{ee(t)},ue),n=t=>w.value?s.value<=1?t<=1:t>1:!0;function l(){d.value&&(clearInterval(d.value),d.value=null)}function c(){a.interval<=0||!a.autoplay||d.value||(d.value=setInterval(()=>m(),a.interval))}const m=()=>{s.value<o.value.length-1?s.value=s.value+1:a.loop&&(s.value=0)};function f(t){if(He(t)){const z=o.value.filter(P=>P.props.name===t);z.length>0&&(t=o.value.indexOf(z[0]))}if(t=Number(t),Number.isNaN(t)||t!==Math.floor(t))return;const u=o.value.length,T=s.value;t<0?s.value=a.loop?u-1:0:t>=u?s.value=a.loop?0:u-1:s.value=t,T===s.value&&r(T),ae()}function r(t){o.value.forEach((u,T)=>{u.translateItem(T,s.value,t)})}function N(t,u){var T,z,P,U;const W=e(o),se=W.length;if(se===0||!t.states.inStage)return!1;const be=u+1,ke=u-1,oe=se-1,_e=W[oe].states.active,Ee=W[0].states.active,Ne=(z=(T=W[be])==null?void 0:T.states)==null?void 0:z.active,Te=(U=(P=W[ke])==null?void 0:P.states)==null?void 0:U.active;return u===oe&&Ee||Ne?"left":u===0&&_e||Te?"right":!1}function K(){S.value=!0,a.pauseOnHover&&l()}function g(){S.value=!1,c()}function v(t){e(p)||o.value.forEach((u,T)=>{t===N(u,T)&&(u.states.hover=!0)})}function y(){e(p)||o.value.forEach(t=>{t.states.hover=!1})}function V(t){s.value=t}function ee(t){a.trigger==="hover"&&t!==s.value&&(s.value=t)}function Ie(){f(s.value-1)}function Ce(){f(s.value+1)}function ae(){l(),a.pauseOnHover||c()}function we(t){a.height==="auto"&&(_.value=t)}function Se(){var t;const u=(t=M.default)==null?void 0:t.call(M);if(!u)return null;const T=Xe(u),z="ElCarouselItem",P=T.filter(U=>Be(U)&&U.type.name===z);return(P==null?void 0:P.length)===2&&a.loop&&!L.value?(w.value=!0,P):(w.value=!1,null)}j(()=>s.value,(t,u)=>{r(u),w.value&&(t=t%2,u=u%2),u>-1&&B("change",t,u)}),j(()=>a.autoplay,t=>{t?c():l()}),j(()=>a.loop,()=>{f(s.value)}),j(()=>a.interval,()=>{ae()});const te=Le();return ce(()=>{j(()=>o.value,()=>{o.value.length>0&&f(a.initialIndex)},{immediate:!0}),te.value=Je(h.value,()=>{r()}),c()}),$e(()=>{l(),h.value&&te.value&&te.value.stop()}),Ae(ge,{root:h,isCardType:L,isVertical:p,items:o,loop:a.loop,addItem:k,removeItem:C,setActiveItem:f,setContainerHeight:we}),{root:h,activeIndex:s,arrowDisplay:E,hasLabel:b,hover:S,isCardType:L,items:o,isVertical:p,containerStyle:$,isItemsTwoLength:w,handleButtonEnter:v,handleButtonLeave:y,handleIndicatorClick:V,handleMouseEnter:K,handleMouseLeave:g,setActiveItem:f,prev:Ie,next:Ce,PlaceholderItem:Se,isTwoLengthShow:n,throttledArrowClick:D,throttledIndicatorHover:F}},xe=["onMouseenter","onClick"],et={key:0},tt="ElCarousel",at=x({name:tt}),st=x({...at,props:Ye,emits:qe,setup(a,{expose:B,emit:i}){const o=a,{root:k,activeIndex:C,arrowDisplay:M,hasLabel:s,hover:d,isCardType:S,items:h,isVertical:_,containerStyle:w,handleButtonEnter:E,handleButtonLeave:b,handleIndicatorClick:L,handleMouseEnter:p,handleMouseLeave:$,setActiveItem:D,prev:F,next:n,PlaceholderItem:l,isTwoLengthShow:c,throttledArrowClick:m,throttledIndicatorHover:f}=Ze(o,i),r=he("carousel"),N=O(()=>{const g=[r.b(),r.m(o.direction)];return e(S)&&g.push(r.m("card")),g}),K=O(()=>{const g=[r.e("indicators"),r.em("indicators",o.direction)];return e(s)&&g.push(r.em("indicators","labels")),o.indicatorPosition==="outside"&&g.push(r.em("indicators","outside")),e(_)&&g.push(r.em("indicators","right")),g});return B({setActiveItem:D,prev:F,next:n}),(g,v)=>(A(),R("div",{ref_key:"root",ref:k,class:H(e(N)),onMouseenter:v[6]||(v[6]=G((...y)=>e(p)&&e(p)(...y),["stop"])),onMouseleave:v[7]||(v[7]=G((...y)=>e($)&&e($)(...y),["stop"]))},[q("div",{class:H(e(r).e("container")),style:me(e(w))},[e(M)?(A(),ne(le,{key:0,name:"carousel-arrow-left",persisted:""},{default:Z(()=>[Y(q("button",{type:"button",class:H([e(r).e("arrow"),e(r).em("arrow","left")]),onMouseenter:v[0]||(v[0]=y=>e(E)("left")),onMouseleave:v[1]||(v[1]=(...y)=>e(b)&&e(b)(...y)),onClick:v[2]||(v[2]=G(y=>e(m)(e(C)-1),["stop"]))},[J(e(re),null,{default:Z(()=>[J(e(Ke))]),_:1})],34),[[X,(g.arrow==="always"||e(d))&&(o.loop||e(C)>0)]])]),_:1})):Q("v-if",!0),e(M)?(A(),ne(le,{key:1,name:"carousel-arrow-right",persisted:""},{default:Z(()=>[Y(q("button",{type:"button",class:H([e(r).e("arrow"),e(r).em("arrow","right")]),onMouseenter:v[3]||(v[3]=y=>e(E)("right")),onMouseleave:v[4]||(v[4]=(...y)=>e(b)&&e(b)(...y)),onClick:v[5]||(v[5]=G(y=>e(m)(e(C)+1),["stop"]))},[J(e(re),null,{default:Z(()=>[J(e(Ue))]),_:1})],34),[[X,(g.arrow==="always"||e(d))&&(o.loop||e(C)<e(h).length-1)]])]),_:1})):Q("v-if",!0),J(e(l)),ve(g.$slots,"default")],6),g.indicatorPosition!=="none"?(A(),R("ul",{key:0,class:H(e(K))},[(A(!0),R(Pe,null,Oe(e(h),(y,V)=>Y((A(),R("li",{key:V,class:H([e(r).e("indicator"),e(r).em("indicator",g.direction),e(r).is("active",V===e(C))]),onMouseenter:ee=>e(f)(V),onClick:G(ee=>e(L)(V),["stop"])},[q("button",{class:H(e(r).e("button"))},[e(s)?(A(),R("span",et,Ve(y.props.label),1)):Q("v-if",!0)],2)],42,xe)),[[X,e(c)(V)]])),128))],2)):Q("v-if",!0)],34))}});var ot=pe(st,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const nt=de({name:{type:String,default:""},label:{type:[String,Number],default:""}}),lt=(a,B)=>{const i=ze(ge),o=fe(),k=.83,C=I(),M=I(!1),s=I(0),d=I(1),S=I(!1),h=I(!1),_=I(!1),w=I(!1),{isCardType:E,isVertical:b}=i;function L(n,l,c){const m=c-1,f=l-1,r=l+1,N=c/2;return l===0&&n===m?-1:l===m&&n===0?c:n<f&&l-n>=N?c+1:n>r&&n-l>=N?-2:n}function p(n,l){var c,m;const f=e(b)?((c=i.root.value)==null?void 0:c.offsetHeight)||0:((m=i.root.value)==null?void 0:m.offsetWidth)||0;return _.value?f*((2-k)*(n-l)+1)/4:n<l?-(1+k)*f/4:(3+k)*f/4}function $(n,l,c){const m=i.root.value;return m?((c?m.offsetHeight:m.offsetWidth)||0)*(n-l):0}const D=(n,l,c)=>{var m;const f=e(E),r=(m=i.items.value.length)!=null?m:Number.NaN,N=n===l;!f&&!We(c)&&(w.value=N||n===c),!N&&r>2&&i.loop&&(n=L(n,l,r));const K=e(b);S.value=N,f?(_.value=Math.round(Math.abs(n-l))<=1,s.value=p(n,l),d.value=e(S)?1:k):s.value=$(n,l,K),h.value=!0,N&&C.value&&i.setContainerHeight(C.value.offsetHeight)};function F(){if(i&&e(E)){const n=i.items.value.findIndex(({uid:l})=>l===o.uid);i.setActiveItem(n)}}return ce(()=>{i.addItem({props:a,states:Re({hover:M,translate:s,scale:d,active:S,ready:h,inStage:_,animating:w}),uid:o.uid,translateItem:D})}),De(()=>{i.removeItem(o.uid)}),{carouselItemRef:C,active:S,animating:w,hover:M,inStage:_,isVertical:b,translate:s,isCardType:E,scale:d,ready:h,handleItemClick:F}},rt=x({name:"ElCarouselItem"}),it=x({...rt,props:nt,setup(a){const B=a,i=he("carousel"),{carouselItemRef:o,active:k,animating:C,hover:M,inStage:s,isVertical:d,translate:S,isCardType:h,scale:_,ready:w,handleItemClick:E}=lt(B),b=O(()=>{const p=`${`translate${e(d)?"Y":"X"}`}(${e(S)}px)`,$=`scale(${e(_)})`;return{transform:[p,$].join(" ")}});return(L,p)=>Y((A(),R("div",{ref_key:"carouselItemRef",ref:o,class:H([e(i).e("item"),e(i).is("active",e(k)),e(i).is("in-stage",e(s)),e(i).is("hover",e(M)),e(i).is("animating",e(C)),{[e(i).em("item","card")]:e(h),[e(i).em("item","card-vertical")]:e(h)&&e(d)}]),style:me(e(b)),onClick:p[0]||(p[0]=(...$)=>e(E)&&e(E)(...$))},[e(h)?Y((A(),R("div",{key:0,class:H(e(i).e("mask"))},null,2)),[[X,!e(k)]]):Q("v-if",!0),ve(L.$slots,"default")],6)),[[X,e(w)]])}});var ye=pe(it,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const ht=je(ot,{CarouselItem:ye}),pt=Ge(ye);export{pt as E,ht as a};
