import{_ as Y}from"./GoodsItem-hwRFWppS.js";import{E as F,u as Z}from"./user-GNF1uiWY.js";import{g as ee,e as ae}from"./member-bylD5VvG.js";/* empty css             */import{E as se,a as te}from"./form-item-klTLtea-.js";import{u as le,i as oe,a as ne,e as de,d as re,b as ie,E as ue,f as ce,h as ve}from"./countryAddress--4ckywHt.js";import{E as pe}from"./input-qP50BFt2.js";import"./popper-uEtH8QgJ.js";import"./scrollbar-WCIx2VLh.js";import"./checkbox-toyrKoaW.js";import{E as _e}from"./button-XMZ_UMB7.js";import{_ as q,k as d,o as c,c as C,e as l,w as o,d as n,a,F as x,n as fe,t as D,l as z,N as me,g as G,b as U,V as M,p as W,f as H}from"./index-A1qbNCIE.js";import"./index--RoxsW5K.js";import"./event-1FCdoqwy.js";import"./isEqual-HACUfoDd.js";import"./scroll-fyVAarvL.js";import"./vnode-3H_S3K6e.js";import"./index-fh7mSV5F.js";import"./isNil--q_uwI5T.js";const R=r=>(W("data-v-7acf5f6a"),r=r(),H(),r),ge={class:"addressWrapper"},ye=["onClick"],he=R(()=>a("span",null,[n("收"),a("i"),n("货"),a("i"),n("人：")],-1)),Ce=R(()=>a("span",null,"联系方式：",-1)),Le=R(()=>a("span",null,"收货地址：",-1)),ke={class:"footer-button"},Ae={class:"dialog-footer"},Ve={class:"dialog-footer"},we={__name:"address",setup(r,{expose:f}){const v=d([]),k=d(!1),A=()=>{k.value=!0},m=d(),p=async()=>{const _=await oe();v.value=_.data.result,v.value.forEach((s,u)=>s.isDefault===0&&(m.value=u))};p();const i=d(!1),V={receiver:"",contact:"",valueList:[],address:"",isDefault:!0,labelList:[],id:""},e=d({...V}),g={receiver:[{required:!0,message:"请输入收件人",trigger:"blur"}],contact:[{required:!0,message:"请输入联系方式",trigger:"blur"}],valueList:[{required:!0,message:"请输入联系地址",trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}]},b=le().regionInfo,y=d(null),I=()=>{e.value.labelList=y.value.getCheckedNodes()[0].pathLabels},E=d(null),$=d(""),N=(_,s)=>{i.value=!0,_==="add"?(e.value={...V},M(()=>E.value.clearValidate()),$.value="添加收货地址"):($.value="修改收货地址",e.value.receiver=s.receiver,e.value.contact=s.contact,e.value.valueList=[s.provinceCode,s.cityCode,s.countyCode],e.value.address=s.address,e.value.id=s.id)},J=async()=>{$.value==="添加收货地址"?(await E.value.validate(),await ne({receiver:e.value.receiver,contact:e.value.contact,provinceCode:e.value.valueList[0],cityCode:e.value.valueList[1],countyCode:e.value.valueList[2],address:e.value.address,postalCode:"111111",addressTags:"家",isDefault:e.value.isDefault?0:1,fullLocation:e.value.labelList.join(" ")}),F({type:"success",message:"添加成功",duration:1500})):(await E.value.validate(),await de(e.value.id,{receiver:e.value.receiver,contact:e.value.contact,provinceCode:e.value.valueList[0],cityCode:e.value.valueList[1],countyCode:e.value.valueList[2],address:e.value.address,postalCode:"111111",addressTags:"家",isDefault:e.value.isDefault?0:1,fullLocation:e.value.labelList.join(" "),id:e.value.id}),F({type:"success",message:"编辑成功",duration:1500})),i.value=!1,p()},K=async _=>{await re(_),F({type:"success",message:"删除成功",duration:1500}),p()};return f({showAddrFn:A}),(_,s)=>{const u=_e,O=ie,T=ue,S=pe,h=se,P=ce,Q=ve,X=te;return c(),C(x,null,[l(T,{modelValue:k.value,"onUpdate:modelValue":s[1]||(s[1]=t=>k.value=t),title:"地址管理",width:"30%",center:""},{footer:o(()=>[a("span",Ae,[l(u,{type:"primary",onClick:s[0]||(s[0]=t=>N("add"))},{default:o(()=>[n("添加地址")]),_:1})])]),default:o(()=>[a("div",ge,[(c(!0),C(x,null,G(v.value,(t,B)=>(c(),C("div",{class:fe(["text item",{active:m.value===B}]),key:t.id,onClick:j=>m.value=B},[a("ul",null,[a("li",null,[he,n(D(t.receiver),1)]),a("li",null,[Ce,n(D(t.contact),1)]),a("li",null,[Le,n(D(t.fullLocation+t.address),1)]),a("div",ke,[a("div",null,[l(u,{round:"",type:"primary",size:"small",onClick:j=>N("edit",t)},{default:o(()=>[n("编辑")]),_:2},1032,["onClick"]),l(u,{round:"",type:"danger",size:"small",onClick:j=>K(t.id)},{default:o(()=>[n("删除")]),_:2},1032,["onClick"])]),a("div",null,[t.isDefault===0?(c(),z(O,{key:0,class:"mx-1",type:"info",size:"small"},{default:o(()=>[n("默认地址")]),_:1})):me("",!0)])])])],10,ye))),128))])]),_:1},8,["modelValue"]),l(T,{modelValue:i.value,"onUpdate:modelValue":s[9]||(s[9]=t=>i.value=t),title:$.value,width:"40%",center:""},{footer:o(()=>[a("span",Ve,[l(u,{onClick:s[7]||(s[7]=t=>i.value=!1)},{default:o(()=>[n("取消")]),_:1}),l(u,{type:"primary",onClick:s[8]||(s[8]=t=>J())},{default:o(()=>[n("确认")]),_:1})])]),default:o(()=>[l(X,{"label-width":"150px",model:e.value,rules:g,ref_key:"formRef",ref:E},{default:o(()=>[l(h,{label:"收货人:",prop:"receiver"},{default:o(()=>[l(S,{modelValue:e.value.receiver,"onUpdate:modelValue":s[2]||(s[2]=t=>e.value.receiver=t)},null,8,["modelValue"])]),_:1}),l(h,{label:"联系方式:",prop:"contact"},{default:o(()=>[l(S,{modelValue:e.value.contact,"onUpdate:modelValue":s[3]||(s[3]=t=>e.value.contact=t)},null,8,["modelValue"])]),_:1}),l(h,{label:"收货地址:",prop:"valueList"},{default:o(()=>[l(P,{placeholder:"选择",modelValue:e.value.valueList,"onUpdate:modelValue":s[4]||(s[4]=t=>e.value.valueList=t),options:U(b),onChange:I,ref_key:"cascaderRef",ref:y},null,8,["modelValue","options"])]),_:1}),l(h,{label:"详细地址:",prop:"address"},{default:o(()=>[l(S,{modelValue:e.value.address,"onUpdate:modelValue":s[5]||(s[5]=t=>e.value.address=t)},null,8,["modelValue"])]),_:1}),l(h,{label:"是否设为默认地址:",prop:"isDefault"},{default:o(()=>[l(Q,{modelValue:e.value.isDefault,"onUpdate:modelValue":s[6]||(s[6]=t=>e.value.isDefault=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])],64)}}},be=q(we,[["__scopeId","data-v-7acf5f6a"]]),L=r=>(W("data-v-689df541"),r=r(),H(),r),Ie={class:"home-overview"},Ee={class:"user-meta"},$e={class:"avatar"},De=["src"],xe={class:"item"},Se=L(()=>a("span",{class:"iconfont icon-edit"},null,-1)),Fe=L(()=>a("label",{for:"inp1"},"更改头像",-1)),Ue=L(()=>a("span",{class:"iconfont icon-dw"},null,-1)),Re=L(()=>a("p",null,"地址管理",-1)),Ne=[Ue,Re],Te={class:"like-container"},Be={class:"home-panel"},je=L(()=>a("div",{class:"header"},[a("h4",null,"猜你喜欢")],-1)),qe={class:"goods-list"},ze={__name:"user",setup(r){const f=Z(),v=d([]);(async()=>{const e=await ee();v.value=e.data.result})();const A=d(null),m=()=>{M(()=>A.value.showAddrFn())},p=d(null),i=async()=>{p.value.click()},V=async e=>{const g=new FormData;g.append("file",e.target.files[0]);const w=await ae(g);f.editAvatarInfo(w.data.result.avatar)};return(e,g)=>{var b,y;const w=Y;return c(),C(x,null,[a("div",Ie,[a("div",Ee,[a("div",$e,[a("img",{src:(b=U(f).userInfo)==null?void 0:b.avatar},null,8,De)]),a("h4",null,D((y=U(f).userInfo)==null?void 0:y.account),1)]),a("div",xe,[a("a",{href:"javascript:;",onClick:i},[Se,Fe,a("input",{ref_key:"inpRef",ref:p,type:"file",name:"",id:"inp1",class:"inp",onChange:V},null,544)]),a("a",{href:"javascript:;",onClick:m},Ne)])]),a("div",Te,[a("div",Be,[je,a("div",qe,[(c(!0),C(x,null,G(v.value,I=>(c(),z(w,{key:I.id,good:I},null,8,["good"]))),128))])])]),l(be,{ref_key:"addressRef",ref:A},null,512)],64)}}},da=q(ze,[["__scopeId","data-v-689df541"]]);export{da as default};
