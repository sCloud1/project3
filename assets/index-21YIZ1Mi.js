/* empty css             */import{_ as V}from"./GoodsItem-hwRFWppS.js";import{E as G,a as P}from"./tab-pane-7lwzq1xQ.js";import{E as U,a as M}from"./breadcrumb-item-Qrsn7pTQ.js";import{a as R,b as A}from"./category-e9lt9vys.js";import{U as $,V as H,_ as j,x as z,k as b,o as g,c as E,a as w,e as m,w as v,s as K,F as Y,g as q,h as J,d as T,t as L,l as Q,p as W,f as X}from"./index-A1qbNCIE.js";import{t as Z}from"./event-1FCdoqwy.js";import{g as ee}from"./scroll-fyVAarvL.js";import{t as x}from"./throttle-4f-LfsRt.js";import"./index--RoxsW5K.js";import"./user-GNF1uiWY.js";import"./index-dgTY9EEW.js";import"./vnode-3H_S3K6e.js";import"./index-fh7mSV5F.js";const B=e=>{let o=0,t=e;for(;t;)o+=t.offsetTop,t=t.offsetParent;return o},te=(e,o)=>Math.abs(B(e)-B(o)),c="ElInfiniteScroll",oe=50,ae=200,se=0,ne={delay:{type:Number,default:ae},distance:{type:Number,default:se},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},F=(e,o)=>Object.entries(ne).reduce((t,[a,r])=>{var f,s;const{type:p,default:l}=r,u=e.getAttribute(`infinite-scroll-${a}`);let i=(s=(f=o[u])!=null?f:u)!=null?s:l;return i=i==="false"?!1:i,i=p(i),t[a]=Number.isNaN(i)?l:i,t},{}),D=e=>{const{observer:o}=e[c];o&&(o.disconnect(),delete e[c].observer)},re=(e,o)=>{const{container:t,containerEl:a,instance:r,observer:f,lastScrollTop:s}=e[c],{disabled:p,distance:l}=F(e,r),{clientHeight:u,scrollHeight:i,scrollTop:n}=a,h=n-s;if(e[c].lastScrollTop=n,f||p||h<0)return;let d=!1;if(t===e)d=i-(u+n)<=l;else{const{clientTop:S,scrollHeight:_}=e,y=te(e,a);d=n+u>=y+S+_-l}d&&o.call(r)};function I(e,o){const{containerEl:t,instance:a}=e[c],{disabled:r}=F(e,a);r||t.clientHeight===0||(t.scrollHeight<=t.clientHeight?o.call(a):D(e))}const le={async mounted(e,o){const{instance:t,value:a}=o;$(a)||Z(c,"'v-infinite-scroll' binding value must be a function"),await H();const{delay:r,immediate:f}=F(e,t),s=ee(e,!0),p=s===window?document.documentElement:s,l=x(re.bind(null,e,a),r);if(s){if(e[c]={instance:t,container:s,containerEl:p,delay:r,cb:a,onScroll:l,lastScrollTop:p.scrollTop},f){const u=new MutationObserver(x(I.bind(null,e,a),oe));e[c].observer=u,u.observe(e,{childList:!0,subtree:!0}),I(e,a)}s.addEventListener("scroll",l)}},unmounted(e){const{container:o,onScroll:t}=e[c];o==null||o.removeEventListener("scroll",t),D(e)},async updated(e){if(!e[c])await H();else{const{containerEl:o,cb:t,observer:a}=e[c];o.clientHeight&&a&&I(e,t)}}},C=le;C.install=e=>{e.directive("InfiniteScroll",C)};const ie=C,ce=e=>(W("data-v-35115a82"),e=e(),X(),e),ue={class:"container"},de={class:"bread-container"},pe={class:"sub-container"},fe=ce(()=>w("div",{class:"tip"},"注：由于后端接口问题，这里显示的是全部商品，并且更改排序规则后，也不会生效，进去对应商品详情页，面包屑导航和上方header激活可能会与当前不一样",-1)),me=["infinite-scroll-disabled"],_e={__name:"index",setup(e){const o=z(),t=b({});(async()=>{var d;const n=await R(o.params.id);t.value=n.data.result,J().changeActiveStatus((d=t.value)==null?void 0:d.parentId)})();const r=b([]),f=b(0),s=b({categoryId:o.params.id,page:1,pageSize:20,sortField:"publishTime"}),p=async()=>{const n=await A(s.value);r.value=n.data.result.items,f.value=n.data.result.counts};p();const l=b(!1),u=async()=>{s.value.page++;const n=await A(s.value);n.data.result.items.length<=0?l.value=!0:r.value=[...r.value,...n.data.result.items]},i=n=>{s.value.sortField=n,s.value.page=1,p()};return(n,h)=>{const d=M,S=U,_=P,y=G,k=V,O=ie;return g(),E("div",ue,[w("div",de,[m(S,{separator:">"},{default:v(()=>[m(d,{to:{path:"/"}},{default:v(()=>[T("首页")]),_:1}),m(d,{to:{path:`/category/${t.value.parentId}`}},{default:v(()=>[T(L(t.value.parentName),1)]),_:1},8,["to"]),m(d,null,{default:v(()=>[T(L(t.value.name),1)]),_:1})]),_:1})]),w("div",pe,[fe,m(y,{"model-value":"publishTime",onTabChange:i},{default:v(()=>[m(_,{label:"最新商品",name:"publishTime"}),m(_,{label:"最高人气",name:"orderNum"}),m(_,{label:"评论最多",name:"evaluateNum"})]),_:1}),K((g(),E("div",{class:"body","infinite-scroll-disabled":l.value},[(g(!0),E(Y,null,q(r.value,N=>(g(),Q(k,{key:N.id,good:N},null,8,["good"]))),128))],8,me)),[[O,u]])])])}}},He=j(_e,[["__scopeId","data-v-35115a82"]]);export{He as default};
